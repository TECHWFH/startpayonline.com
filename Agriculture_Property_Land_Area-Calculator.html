<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>‡§≠‡•Ç‡§Æ‡§ø ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞‡§´‡§≤ ‡§ï‡•à‡§≤‡§ï‡•Å‡§≤‡•á‡§ü‡§∞ ‚Äî StartPay</title>
  <style>
    /* ====== Basic / Layout ====== */
    :root{
      --blue-start:#0000FF; /* final gradient start */
      --red-end:#FF0000;    /* final gradient end */
      --remove:#EF4444;     /* ‚ùå */
      --add:#3B82F6;        /* ‚ûï */
    }
    body{margin:0;font-family:Inter, Arial, sans-serif;background:#f4f7fb;color:#111;}
    header{background:#1e3a8a;color:#fff;padding:12px 16px;display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap}
    .header-left{display:flex;align-items:center;gap:10px}
    .btn-home{background:#ff9800;border:none;color:#fff;padding:8px 12px;border-radius:8px;cursor:pointer;font-weight:600}
    .title{font-size:16px;margin:0}
    .info{font-size:13px;color:#e6eefc}
    main{max-width:980px;margin:18px auto;padding:0 14px 120px}
    .card{background:#fff;border-radius:12px;padding:16px;box-shadow:0 6px 18px rgba(16,24,40,0.06)}
    h2{margin:6px 0 12px;color:#b22222}

    /* ====== Inputs ====== */
    .row{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
    label{font-weight:700;font-size:14px;margin-top:8px;display:block}
    input[type="number"], select{padding:10px;border:1px solid #d1d5db;border-radius:8px;font-size:15px;width:100%}
    .col{flex:1;min-width:160px}
    .small{width:140px}

    /* partial list */
    .partials{margin-top:12px}
    .partial-item{display:flex;gap:8px;align-items:center;margin-bottom:8px}
    .partial-item input{flex:1}

    .btn-add{background:var(--add);color:#fff;border:none;padding:8px 12px;border-radius:8px;cursor:pointer;font-weight:700}
    .btn-remove{background:transparent;border:none;color:var(--remove);font-size:20px;cursor:pointer}

    /* ====== Table ====== */
    table{width:100%;border-collapse:collapse;margin-top:14px;font-size:14px}
    th,td{border:1px solid #e6e6e6;padding:10px;text-align:center}
    th{background:#b22222;color:#fff;font-weight:700}
    tr:nth-child(even){background:#fbfbfb}
    .final-total-row td{
      background: linear-gradient(90deg, var(--blue-start), var(--red-end));
      color:#fff;font-weight:800;
    }

    /* ====== Footer Buttons (fixed) ====== */
    footer{position:fixed;left:0;right:0;bottom:0;background:#111827;padding:12px;display:flex;gap:10px;flex-wrap:wrap;justify-content:center;z-index:999}
    .footer-buttons button{flex:1;min-width:140px;max-width:220px;padding:10px;border-radius:8px;border:none;color:#fff;font-weight:700;cursor:pointer}
    .btn-print{background:#007bff}
    .btn-ws{background:#25d366}
    .btn-auto{background:#20c997}
    .btn-call{background:#e83e8c}
    .btn-terms{background:#ffc107;color:#000}
    .btn-site{background:#6f42c1}

    /* ====== Responsiveness ====== */
    @media (max-width:640px){
      .row{flex-direction:column}
      .small{width:100%}
      header{padding:10px}
      .title{font-size:15px}
      .info{font-size:12px}
      table th, table td{font-size:12px;padding:8px}
    }

    /* tiny helper */
    .muted{color:#666;font-size:13px;margin-top:6px}
  </style>
</head>
<body>

  <!-- HEADER -->
  <header>
    <div class="header-left">
      <button class="btn-home" onclick="goHome()">üè† Home</button>
      <div>
        <p class="title">üìä StartPay Legal & Finance Calculator</p>
        <div class="info">by Anurag Rai | ‚òé 9340726600 | üõ† Technical Support Consultant</div>
      </div>
    </div>
    <div style="text-align:right">
      <div style="font-weight:700">‡§≠‡•Ç‡§Æ‡§ø ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞‡§´‡§≤ ‡§ï‡•à‡§≤‡§ï‡•Å‡§≤‡•á‡§ü‡§∞</div>
      <div class="info" style="margin-top:6px">‡§∏‡§≠‡•Ä ‡§™‡§∞‡§ø‡§£‡§æ‡§Æ: ‡§π‡•á‡§ï‡•ç‡§ü‡•á‡§Ø‡§∞ ‚áÜ ‡§è‡§ï‡§°‡§º ‚áÜ ‡§µ‡§∞‡•ç‡§ó ‡§Æ‡•Ä‡§ü‡§∞ ‚áÜ ‡§µ‡§∞‡•ç‡§ó ‡§´‡•Å‡§ü</div>
    </div>
  </header>

  <!-- MAIN -->
  <main>
    <div class="card">
      <h2>‡§ï‡•Å‡§≤ ‡§ú‡§º‡§Æ‡•Ä‡§® ‡§µ ‡§≠‡§æ‡§ó (Partial) ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç ‚Äî ‡§™‡§∞‡§ø‡§£‡§æ‡§Æ ‡§§‡•Å‡§∞‡§Ç‡§§ ‡§¶‡§ø‡§ñ‡•á‡§Ç</h2>

      <!-- Inputs -->
      <div class="row">
        <div class="col">
          <label>‡§ï‡•Å‡§≤ ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞‡§´‡§≤</label>
          <input id="totalArea" type="number" min="0" step="any" placeholder="‡§Æ‡§æ‡§® ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç (‡§â‡§¶‡§æ. 2 ‡§Ø‡§æ 0.075)" oninput="recalc()">
          <div class="muted">‡§â‡§¶‡§æ‡§π‡§∞‡§£: 2 (‡§Ö‡§ó‡§∞ ‡§Ü‡§™ ‡§è‡§ï‡§°‡§º ‡§Æ‡•á‡§Ç ‡§π‡•à‡§Ç) ‡§Ø‡§æ 0.075 (‡§π‡•á‡§ï‡•ç‡§ü‡•á‡§Ø‡§∞)</div>
        </div>

        <div class="col small">
          <label>‡§á‡§ï‡§æ‡§à</label>
          <select id="unit" onchange="recalc()">
            <option value="hectare">‡§π‡•á‡§ï‡•ç‡§ü‡•á‡§Ø‡§∞ (hectare)</option>
            <option value="acre">‡§è‡§ï‡§°‡§º (acre)</option>
            <option value="sqm">‡§µ‡§∞‡•ç‡§ó ‡§Æ‡•Ä‡§ü‡§∞ (m¬≤)</option>
            <option value="sqft">‡§µ‡§∞‡•ç‡§ó ‡§´‡•Å‡§ü (ft¬≤)</option>
          </select>
        </div>

        <div class="col small">
          <label>‡§∞‡§æ‡§â‡§Ç‡§°‡§ø‡§Ç‡§ó</label>
          <select id="rounding" onchange="recalc()">
            <option value="2">‡§¶‡§∂‡§Æ‡§≤‡§µ 2 ‡§Ö‡§Ç‡§ï</option>
            <option value="4" selected>‡§¶‡§∂‡§Æ‡§≤‡§µ 4 ‡§Ö‡§Ç‡§ï (‡§π‡•á.)</option>
            <option value="0">‡§™‡•Ç‡§∞‡•ç‡§£‡§æ‡§Ç‡§ï</option>
          </select>
        </div>
      </div>

      <!-- Partial Areas -->
      <div style="margin-top:12px;display:flex;align-items:center;justify-content:space-between;gap:10px;flex-wrap:wrap">
        <div style="font-weight:700">‡§ò‡§ü‡§æ‡§è ‡§ú‡§æ‡§®‡•á ‡§µ‡§æ‡§≤‡•á ‡§π‡§ø‡§∏‡•ç‡§∏‡•á (Partial Areas)</div>
        <div>
          <button class="btn-add" onclick="addPartial()">‚ûï Add</button>
        </div>
      </div>

      <div id="partials" class="partials" aria-live="polite">
        <!-- Partial entries will appear here -->
      </div>

      <div style="margin-top:10px" class="muted">‡§®‡§ø‡§Ø‡§Æ: ‡§Ø‡§¶‡§ø ‡§ï‡•Å‡§≤ ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞‡§´‡§≤ ‡§∏‡•á ‡§ú‡•ã‡§°‡§º‡§ï‡§∞ ‡§ò‡§ü‡§æ ‡§¶‡•á‡§®‡•á ‡§™‡§∞ ‡§∂‡•á‡§∑ ‡§®‡§ï‡§æ‡§∞‡§æ‡§§‡•ç‡§Æ‡§ï ‡§π‡•ã ‡§§‡•ã ‡§∂‡•á‡§∑ 0 ‡§¶‡§ø‡§ñ‡•á‡§ó‡§æ‡•§ ‡§∏‡§≠‡•Ä ‡§ó‡§£‡§®‡§æ‡§è‡§Å ‡§Ü‡§Ç‡§§‡§∞‡§ø‡§ï ‡§∞‡•Ç‡§™ ‡§∏‡•á ‡§π‡•á‡§ï‡•ç‡§ü‡•á‡§Ø‡§∞ ‡§Æ‡•á‡§Ç ‡§π‡•ã‡§§‡•Ä ‡§π‡•à‡§Ç (‡§™‡§∞‡§ø‡§£‡§æ‡§Æ ‡§ö‡•Å‡§®‡•á ‡§π‡•Å‡§è ‡§∞‡§æ‡§â‡§Ç‡§°‡§ø‡§Ç‡§ó ‡§ï‡•á ‡§Ö‡§®‡•Å‡§∏‡§æ‡§∞ ‡§¶‡§ø‡§ñ‡§§‡•á ‡§π‡•à‡§Ç)‡•§</div>

      <!-- Results Table -->
      <div id="resultTableArea"></div>

    </div>
  </main>

  <!-- FOOTER (fixed) -->
  <footer>
    <button class="footer-buttons btn-print" onclick="window.print()">üñ∏Ô∏è Print / Export PDF</button>
    <button class="footer-buttons btn-ws" onclick="shareWhatsApp()">üìû Need Help? WhatsApp</button>
    <button class="footer-buttons btn-auto" onclick="autoShareWhatsApp()">üì© Auto WhatsApp Message</button>
    <button class="footer-buttons btn-call" onclick="window.location.href='tel:9340726600'">üìû Call Now</button>
    <button class="footer-buttons btn-terms" onclick="alert('Terms & Conditions: ‡§Ø‡§π ‡§ï‡•à‡§≤‡§ï‡•Å‡§≤‡•á‡§ü‡§∞ ‡§ï‡•á‡§µ‡§≤ ‡§∏‡•Ç‡§ö‡§®‡§æ ‡§π‡•á‡§§‡•Å ‡§π‡•à‡•§')">‚öñÔ∏è Terms & Conditions</button>
    <button class="footer-buttons btn-site" onclick="window.open('https://startpayonline.com/','_blank')">üåê Visit Website</button>
  </footer>

  <!-- jsPDF (for PDF export) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

  <script>
    /***** Constants & helpers *****/
    // conversion constants (precise):
    const HA_TO_ACRE = 2.47105;
    const HA_TO_SQM = 10000;
    const HA_TO_SQFT = 107639; // used previously in your examples
    // Note: using 107639 as per earlier pattern; if you prefer 107639.104167 use that.

    // Utility rounding:
    function round(value, digits){
      const m = Math.pow(10, digits);
      return Math.round(value*m)/m;
    }

    // Format with chosen rounding for UI strings
    function fmtH(h, digits){ return round(h, digits).toFixed(digits) + " ‡§π‡•á."; }
    function fmtA(h, digits){ return round(h * HA_TO_ACRE, digits).toFixed(digits) + " ‡§è‡§ï‡§°‡§º"; }
    function fmtM(h, digits){ return round(h * HA_TO_SQM, 2).toFixed(2) + " m¬≤"; } // sqm: 2 decimals
    function fmtF(h, digits){ return round(h * HA_TO_SQFT, 2).toFixed(2) + " ft¬≤"; } // sqft: 2 decimals

    // keep partials in array
    let partials = []; // each: {id, value (number), label (optional)}

    // generate unique id
    function uid(){ return 'p_' + Math.random().toString(36).slice(2,9); }

    /***** Partial area UI management *****/
    const partialsDiv = document.getElementById('partials');

    function addPartial(initialValue = '') {
      const id = uid();
      partials.push({id, value: Number(initialValue) || 0});
      renderPartials();
      recalc();
    }

    function removePartial(id){
      partials = partials.filter(p => p.id !== id);
      renderPartials();
      recalc();
    }

    function updatePartial(id, raw){
      const val = parseFloat(raw) || 0;
      const p = partials.find(x => x.id === id);
      if(p) p.value = val;
      recalc();
    }

    function renderPartials(){
      partialsDiv.innerHTML = '';
      if(partials.length === 0){
        partialsDiv.innerHTML = '<div class="muted">‡§ï‡•ã‡§à Partial Area ‡§®‡§π‡•Ä‡§Ç ‡§ú‡•ã‡§°‡§º‡§æ ‡§ó‡§Ø‡§æ ‚Äî "Add" ‡§¶‡§¨‡§æ‡§ï‡§∞ ‡§ú‡•ã‡§°‡§º‡•á‡§Ç‡•§</div>';
        return;
      }
      partials.forEach((p, idx) => {
        const wrapper = document.createElement('div');
        wrapper.className = 'partial-item';
        wrapper.innerHTML = `
          <input type="number" step="any" min="0" value="${p.value}" oninput="updatePartial('${p.id}', this.value)" placeholder="Partial ${idx+1}">
          <button class="btn-remove" title="‡§π‡§ü‡§æ‡§è‡§Å" onclick="removePartial('${p.id}')">‚ùå</button>
        `;
        partialsDiv.appendChild(wrapper);
      });
    }

    // Start with one empty partial by default (optional)
    addPartial('');

    /***** Core calc logic *****/
    function parseInputToHectare(value, unit){
      value = parseFloat(value) || 0;
      if(unit === 'hectare') return value;
      if(unit === 'acre') return value / HA_TO_ACRE;
      if(unit === 'sqm') return value / HA_TO_SQM;
      if(unit === 'sqft') return value / HA_TO_SQFT;
      return 0;
    }

    function recalc(){
      // read inputs
      const totalRaw = document.getElementById('totalArea').value || 0;
      const unit = document.getElementById('unit').value;
      const roundDigits = parseInt(document.getElementById('rounding').value, 10);

      const totalHa = parseInputToHectare(totalRaw, unit);

      // sum partials (note: partials are input in same unit as 'unit')
      let sumPartHa = 0;
      partials.forEach(p => {
        sumPartHa += parseInputToHectare(p.value, unit);
      });

      // remaining
      let remainHa = totalHa - sumPartHa;
      if(remainHa < 0) remainHa = 0;

      // prepare formatted strings
      const totalFmt = {
        h: fmtH(totalHa, roundDigits),
        a: fmtA(totalHa, roundDigits),
        m: fmtM(totalHa, roundDigits),
        f: fmtF(totalHa, roundDigits)
      };
      const partFmt = {
        h: fmtH(sumPartHa, roundDigits),
        a: fmtA(sumPartHa, roundDigits),
        m: fmtM(sumPartHa, roundDigits),
        f: fmtF(sumPartHa, roundDigits)
      };
      const remainFmt = {
        h: fmtH(remainHa, roundDigits),
        a: fmtA(remainHa, roundDigits),
        m: fmtM(remainHa, roundDigits),
        f: fmtF(remainHa, roundDigits)
      };

      // build partials breakdown (individual)
      let partialsHTML = '';
      if(partials.length > 0){
        partialsHTML += '<div style="margin-top:10px"><strong>Partial Breakdown (Entered values in selected unit):</strong></div>';
        partials.forEach((p, idx) => {
          const h = parseInputToHectare(p.value, unit);
          partialsHTML += `<div style="margin-top:6px">‚Ä¢ Partial ${idx+1}: ${p.value} ${unit} = ${fmtH(h, roundDigits)} / ${fmtA(h, roundDigits)} / ${fmtM(h, roundDigits)} / ${fmtF(h, roundDigits)}</div>`;
        });
      }

      // results table
      const tableHTML = `
        <table aria-live="polite">
          <tr><th>‡§µ‡§ø‡§µ‡§∞‡§£</th><th>‡§π‡•á‡§ï‡•ç‡§ü‡•á‡§Ø‡§∞</th><th>‡§è‡§ï‡§°‡§º</th><th>‡§µ‡§∞‡•ç‡§ó ‡§Æ‡•Ä‡§ü‡§∞</th><th>‡§µ‡§∞‡•ç‡§ó ‡§´‡•Å‡§ü</th></tr>
          <tr><td><b>‡§ï‡•Å‡§≤ ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞‡§´‡§≤</b></td><td>${totalFmt.h}</td><td>${totalFmt.a}</td><td>${totalFmt.m}</td><td>${totalFmt.f}</td></tr>
          <tr><td><b>‡§ò‡§ü‡§æ‡§Ø‡§æ ‡§ó‡§Ø‡§æ (‡§ï‡•Å‡§≤)</b></td><td>${partFmt.h}</td><td>${partFmt.a}</td><td>${partFmt.m}</td><td>${partFmt.f}</td></tr>
          <tr class="final-total-row"><td><b>‡§∂‡•á‡§∑ ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞‡§´‡§≤</b></td><td>${remainFmt.h}</td><td>${remainFmt.a}</td><td>${remainFmt.m}</td><td>${remainFmt.f}</td></tr>
        </table>
        ${partialsHTML}
        <div style="margin-top:10px" class="muted">‡§®‡§ø‡§Ø‡§Æ: ‡§∏‡§≠‡•Ä ‡§á‡§®‡§™‡•Å‡§ü ‡§ö‡•Å‡§®‡•Ä ‡§π‡•Å‡§à ‡§á‡§ï‡§æ‡§à ‡§Æ‡•á‡§Ç ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç‡•§ ‡§ó‡§£‡§®‡§æ ‡§Ü‡§Ç‡§§‡§∞‡§ø‡§ï ‡§∞‡•Ç‡§™ ‡§∏‡•á ‡§π‡•á‡§ï‡•ç‡§ü‡•á‡§Ø‡§∞ ‡§Æ‡•á‡§Ç ‡§π‡•ã‡§§‡•Ä ‡§π‡•à‡•§</div>
      `;

      document.getElementById('resultTableArea').innerHTML = tableHTML;

      // prepare lastResult text for sharing/pdf
      lastResult = `StartPay ‚Äî ‡§≠‡•Ç‡§Æ‡§ø ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞‡§´‡§≤ ‡§∞‡§ø‡§™‡•ã‡§∞‡•ç‡§ü\n\n‡§ï‡•Å‡§≤ ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞‡§´‡§≤: ${totalFmt.h} | ${totalFmt.a} | ${totalFmt.m} | ${totalFmt.f}\n‡§ò‡§ü‡§æ‡§Ø‡§æ ‡§ó‡§Ø‡§æ (‡§ï‡•Å‡§≤): ${partFmt.h} | ${partFmt.a} | ${partFmt.m} | ${partFmt.f}\n‡§∂‡•á‡§∑ ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞‡§´‡§≤: ${remainFmt.h} | ${remainFmt.a} | ${remainFmt.m} | ${remainFmt.f}\n\n(Partial ‡§µ‡§ø‡§µ‡§∞‡§£ ‡§®‡•Ä‡§ö‡•á)\n${partials.length>0? partials.map((p,i)=> `Partial ${i+1}: ${p.value} ${unit}`).join('\n') : '‡§ï‡•ã‡§à Partial ‡§®‡§π‡•Ä‡§Ç'}\n\n-- StartPay`;
    }

    /***** Export / Share / Print functions *****/
    let lastResult = '';

    function shareWhatsApp(){
      if(!lastResult) { alert('‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡§π‡§≤‡•á ‡§ó‡§£‡§®‡§æ ‡§ï‡§∞‡•á‡§Ç‡•§'); return; }
      const url = "https://wa.me/9340726600?text=" + encodeURIComponent(lastResult);
      window.open(url, '_blank');
    }

    function autoShareWhatsApp(){
      if(!lastResult) { alert('‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡§π‡§≤‡•á ‡§ó‡§£‡§®‡§æ ‡§ï‡§∞‡•á‡§Ç‡•§'); return; }
      shareWhatsApp();
    }

    async function downloadPDF(){
      if(!lastResult) { alert('‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡§π‡§≤‡•á ‡§ó‡§£‡§®‡§æ ‡§ï‡§∞‡•á‡§Ç‡•§'); return; }
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF({unit:'pt',format:'a4'});
      const margin = 40;
      let y = 40;
      doc.setFontSize(14);
      doc.text("StartPay ‚Äî ‡§≠‡•Ç‡§Æ‡§ø ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞‡§´‡§≤ ‡§∞‡§ø‡§™‡•ã‡§∞‡•ç‡§ü", margin, y); y += 20;
      doc.setFontSize(11);
      const lines = doc.splitTextToSize(lastResult, 520);
      doc.text(lines, margin, y);
      doc.save("StartPay_Land_Area_Report.pdf");
    }

    // initial calc
    recalc();

    function goHome(){
      // default: go to StartPay site. Change if needed.
      window.location.href = 'https://startpayonline.com/';
    }
  </script>
</body>
</html>
