<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>‡§≠‡•Ç‡§Æ‡§ø ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞‡§´‡§≤ ‡§ï‡•à‡§≤‡§ï‡•Å‡§≤‡•á‡§ü‡§∞ ‚Äî StartPay</title>
  <style>
    body{margin:0;font-family:Arial, sans-serif;background:#f4f7fb;}
    header{background:#1e3a8a;color:#fff;padding:12px;display:flex;justify-content:space-between;flex-wrap:wrap;align-items:center}
    .btn-home{background:#ff9800;border:none;color:#fff;padding:6px 10px;border-radius:6px;cursor:pointer}
    main{max-width:960px;margin:20px auto;padding:0 14px 180px}
    .card{background:#fff;padding:16px;border-radius:12px;box-shadow:0 4px 10px rgba(0,0,0,0.1);margin-bottom:20px}
    h2{color:#b22222;margin-top:0}
    input,select{padding:6px;margin-top:4px;border:1px solid #ccc;border-radius:6px;width:100%;box-sizing:border-box}
    label{font-weight:bold;font-size:14px}
    .row{display:flex;gap:10px;flex-wrap:wrap}
    .col{flex:1;min-width:140px}
    .table-wrapper{overflow-x:auto}
    table{width:100%;border-collapse:collapse;margin-top:15px;min-width:480px}
    th,td{border:1px solid #ccc;padding:6px;text-align:center}
    th{background:#b22222;color:white}
    tr:nth-child(even){background:#f9f9f9}
    .final-total-row td{background:linear-gradient(90deg,#0000FF,#FF0000);color:white;font-weight:bold}
    .btn-add{background:#3B82F6;color:white;border:none;padding:6px 10px;border-radius:6px;cursor:pointer}
    .btn-remove{background:transparent;border:none;color:#EF4444;font-size:18px;cursor:pointer}
    footer{position:fixed;bottom:0;left:0;right:0;background:#111827;padding:10px;display:flex;flex-wrap:wrap;gap:10px;justify-content:center;z-index:999;
           box-shadow:0 -3px 8px rgba(0,0,0,0.3);}
    footer button{flex:1 1 45%;padding:8px;border:none;border-radius:8px;color:white;font-weight:bold;cursor:pointer;
                  display:flex;flex-direction:column;align-items:center;justify-content:center;gap:4px}
    .btn-print{background:#007bff}
    .btn-ws{background:#25d366}
    .btn-auto{background:#20c997}
    .btn-call{background:#e83e8c}
    .btn-terms{background:#ffc107;color:black}
    .btn-site{background:#6f42c1}
    /* Breakdown Card */
    .breakdown-card{background:#fff;border-radius:12px;box-shadow:0 4px 8px rgba(0,0,0,0.1);padding:12px;margin-top:20px}
    .breakdown-card h3{margin-top:0;color:#333;text-align:center}
    @media(max-width:600px){
      header{flex-direction:column;align-items:flex-start}
      .row{flex-direction:column}
      footer{flex-direction:column}
      footer button{flex:1 1 100%}
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header>
    <button class="btn-home" onclick="goHome()">üè† Home</button>
    <div>
      üìä StartPay Legal & Finance Calculator<br>
      <small>by Anurag Rai | ‚òé 9340726600</small>
    </div>
  </header>

  <!-- Main Body -->
  <main>
    <div class="card">
      <h2>‡§≠‡•Ç‡§Æ‡§ø ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞‡§´‡§≤ ‡§ï‡•à‡§≤‡§ï‡•Å‡§≤‡•á‡§ü‡§∞</h2>

      <!-- Total Area -->
      <div class="row">
        <div class="col">
          <label>‡§ï‡•Å‡§≤ ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞‡§´‡§≤</label>
          <input id="totalArea" type="number" placeholder="‡§Æ‡§æ‡§® ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç" oninput="recalc()">
        </div>
        <div class="col">
          <label>‡§á‡§ï‡§æ‡§à</label>
          <select id="unit" onchange="recalc()">
            <option value="hectare">‡§π‡•á‡§ï‡•ç‡§ü‡•á‡§Ø‡§∞</option>
            <option value="acre">‡§è‡§ï‡§°‡§º</option>
            <option value="sqm">‡§µ‡§∞‡•ç‡§ó ‡§Æ‡•Ä‡§ü‡§∞</option>
            <option value="sqft">‡§µ‡§∞‡•ç‡§ó ‡§´‡•Å‡§ü</option>
          </select>
        </div>
      </div>

      <!-- Partial Areas -->
      <div style="margin-top:12px;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap">
        <b>‡§ò‡§ü‡§æ‡§è ‡§ú‡§æ‡§®‡•á ‡§µ‡§æ‡§≤‡•á ‡§π‡§ø‡§∏‡•ç‡§∏‡•á (Partial Areas)</b>
        <button class="btn-add" onclick="addPartial()">‚ûï Add</button>
      </div>
      <div class="table-wrapper">
        <table id="partialTable">
          <tr><th>‡§®‡§æ‡§Æ</th><th>‡§Æ‡§æ‡§®</th><th>‡§á‡§ï‡§æ‡§à</th><th>‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ</th></tr>
        </table>
      </div>
    </div>

    <!-- Results -->
    <div class="card" id="resultTableArea"></div>

    <!-- Breakdown -->
    <div class="breakdown-card" id="breakdownTableArea"></div>
  </main>

  <!-- Footer -->
  <footer>
    <button class="btn-print" onclick="window.print()">üñ∏Ô∏è<span>Print / PDF</span></button>
    <button class="btn-ws" onclick="window.open('https://wa.me/9340726600','_blank')">üìû<span>WhatsApp Help</span></button>
    <button class="btn-auto" onclick="autoShareWhatsApp()">üì©<span>Auto Share</span></button>
    <button class="btn-call" onclick="window.location.href='tel:9340726600'">üìû<span>Call Now</span></button>
    <button class="btn-terms" onclick="window.open('terms.html','_blank')">‚öñÔ∏è<span>Terms</span></button>
    <button class="btn-site" onclick="window.open('https://startpayonline.com/','_blank')">üåê<span>Website</span></button>
  </footer>

  <!-- Script -->
  <script>
    const HA_TO_ACRE=2.47105, HA_TO_SQM=10000, HA_TO_SQFT=107639;
    let partials=[]; 
    const colors=["#e53935","#1e88e5","#43a047","#fb8c00","#8e24aa","#00acc1","#fdd835"];

    function uid(){return 'p'+Math.random().toString(36).slice(2,7);}
    function parseToHa(v,u){v=parseFloat(v)||0;
      if(u==="hectare") return v;
      if(u==="acre") return v/HA_TO_ACRE;
      if(u==="sqm") return v/HA_TO_SQM;
      if(u==="sqft") return v/HA_TO_SQFT;
      return 0;}
    function fmt(h){return {
      h:h.toFixed(4)+" ‡§π‡•á.",a:(h*HA_TO_ACRE).toFixed(4)+" ‡§è‡§ï‡§°‡§º",
      m:(h*HA_TO_SQM).toFixed(2)+" m¬≤",f:(h*HA_TO_SQFT).toFixed(2)+" ft¬≤"};}

    function addPartial(name="Other",val=0,unit="acre",custom=""){
      const id=uid();
      partials.push({id,label:name,value:val,unit:unit,custom:custom});
      renderPartials();
      recalc();
    }
    function removePartial(id){partials=partials.filter(p=>p.id!==id);renderPartials();recalc();}
    function updatePartial(id,field,val){
      const p=partials.find(x=>x.id===id);
      if(p){
        if(field==="label")p.label=val;
        if(field==="value")p.value=parseFloat(val)||0;
        if(field==="unit")p.unit=val;
        if(field==="custom")p.custom=val;
      }
      recalc();
    }

    function renderPartials(){
      const tbl=document.getElementById("partialTable");
      tbl.innerHTML=`<tr><th>‡§®‡§æ‡§Æ</th><th>‡§Æ‡§æ‡§®</th><th>‡§á‡§ï‡§æ‡§à</th><th>‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ</th></tr>`;
      partials.forEach(p=>{
        const showTextbox = (p.label==="Other");
        tbl.innerHTML+=`
        <tr>
          <td>
            <select onchange="updatePartial('${p.id}','label',this.value);renderPartials();">
              <option ${p.label==="Other"?"selected":""}>Other</option>
              <option ${p.label==="‡§ñ‡•á‡§§ (‡§ï‡•É‡§∑‡§ø‡§Ø‡•ã‡§ó‡•ç‡§Ø ‡§≠‡•Ç‡§Æ‡§ø)"?"selected":""}>‡§ñ‡•á‡§§ (‡§ï‡•É‡§∑‡§ø‡§Ø‡•ã‡§ó‡•ç‡§Ø ‡§≠‡•Ç‡§Æ‡§ø)</option>
              <option ${p.label==="‡§î‡§¶‡•ç‡§Ø‡•ã‡§ó‡§ø‡§ï ‡§ú‡§º‡§Æ‡•Ä‡§®"?"selected":""}>‡§î‡§¶‡•ç‡§Ø‡•ã‡§ó‡§ø‡§ï ‡§ú‡§º‡§Æ‡•Ä‡§®</option>
              <option ${p.label==="‡§µ‡§æ‡§£‡§ø‡§ú‡•ç‡§Ø‡§ø‡§ï ‡§ú‡§º‡§Æ‡•Ä‡§®"?"selected":""}>‡§µ‡§æ‡§£‡§ø‡§ú‡•ç‡§Ø‡§ø‡§ï ‡§ú‡§º‡§Æ‡•Ä‡§®</option>
              <option ${p.label==="‡§Æ‡§ï‡§æ‡§®"?"selected":""}>‡§Æ‡§ï‡§æ‡§®</option>
              <option ${p.label==="‡§§‡§æ‡§≤‡§æ‡§¨"?"selected":""}>‡§§‡§æ‡§≤‡§æ‡§¨</option>
              <option ${p.label==="‡§∞‡§æ‡§∏‡•ç‡§§‡§æ"?"selected":""}>‡§∞‡§æ‡§∏‡•ç‡§§‡§æ</option>
              <option ${p.label==="‡§¨‡§ó‡•Ä‡§ö‡§æ"?"selected":""}>‡§¨‡§ó‡•Ä‡§ö‡§æ</option>
            </select>
            ${showTextbox ? `<input type="text" placeholder="‡§®‡§æ‡§Æ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç" value="${p.custom||""}" 
              oninput="updatePartial('${p.id}','custom',this.value)">` : ""}
          </td>
          <td><input type="number" value="${p.value}" oninput="updatePartial('${p.id}','value',this.value)"></td>
          <td>
            <select onchange="updatePartial('${p.id}','unit',this.value)">
              <option value="hectare" ${p.unit==="hectare"?"selected":""}>‡§π‡•á.</option>
              <option value="acre" ${p.unit==="acre"?"selected":""}>‡§è‡§ï‡§°‡§º</option>
              <option value="sqm" ${p.unit==="sqm"?"selected":""}>m¬≤</option>
              <option value="sqft" ${p.unit==="sqft"?"selected":""}>ft¬≤</option>
            </select>
          </td>
          <td><button class="btn-remove" onclick="removePartial('${p.id}')">‚ùå</button></td>
        </tr>`;
      });
    }

    function recalc(){
      const total=parseToHa(document.getElementById("totalArea").value,document.getElementById("unit").value);
      let parts=0; partials.forEach(p=>parts+=parseToHa(p.value,p.unit));
      let remain=total-parts;if(remain<0)remain=0;
      const t=fmt(total),s=fmt(parts),r=fmt(remain);

      document.getElementById("resultTableArea").innerHTML=`
        <div class="table-wrapper">
          <table>
            <tr><th>‡§µ‡§ø‡§µ‡§∞‡§£</th><th>‡§π‡•á‡§ï‡•ç‡§ü‡•á‡§Ø‡§∞</th><th>‡§è‡§ï‡§°‡§º</th><th>m¬≤</th><th>ft¬≤</th></tr>
            <tr><td>‡§ï‡•Å‡§≤</td><td>${t.h}</td><td>${t.a}</td><td>${t.m}</td><td>${t.f}</td></tr>
            <tr><td>‡§ò‡§ü‡§æ‡§Ø‡§æ ‡§ó‡§Ø‡§æ</td><td>${s.h}</td><td>${s.a}</td><td>${s.m}</td><td>${s.f}</td></tr>
            <tr class="final-total-row"><td>‡§∂‡•á‡§∑</td><td>${r.h}</td><td>${r.a}</td><td>${r.m}</td><td>${r.f}</td></tr>
          </table>
        </div>`;

      if(partials.length>0){
        let b="<h3>üìã Breakdown Details</h3><div class='table-wrapper'><table><tr><th>‡§®‡§æ‡§Æ</th><th>‡§Æ‡§æ‡§®</th><th>‡§á‡§ï‡§æ‡§à</th><th>‡§π‡•á‡§ï‡•ç‡§ü‡•á‡§Ø‡§∞ ‡§Æ‡•á‡§Ç</th></tr>";
        partials.forEach((p,i)=>{
          let name = (p.label==="Other" && p.custom) ? p.custom : p.label;
          let color = colors[i % colors.length];
          b+=`<tr>
                <td style="color:${color};font-weight:bold">${name}</td>
                <td>${p.value}</td>
                <td>${p.unit}</td>
                <td>${parseToHa(p.value,p.unit).toFixed(4)} ‡§π‡•á.</td>
              </tr>`;
        });
        b+="</table></div>";
        document.getElementById("breakdownTableArea").innerHTML=b;
      } else {
        document.getElementById("breakdownTableArea").innerHTML="";
      }
      lastResult=`‡§ï‡•Å‡§≤=${t.h}, ‡§ò‡§ü‡§æ‡§Ø‡§æ=${s.h}, ‡§∂‡•á‡§∑=${r.h}`;
    }

    let lastResult="";
    function autoShareWhatsApp(){
      if(!lastResult){alert("‡§™‡§π‡§≤‡•á ‡§ó‡§£‡§®‡§æ ‡§ï‡§∞‡•á‡§Ç");return;}
      window.open("https://wa.me/9340726600?text="+encodeURIComponent(lastResult),"_blank");
    }
    function goHome(){window.location.href="https://startpayonline.com/";}

    // Page Load ‡§™‡§∞ Example Row
    window.onload=function(){ addPartial("‡§Æ‡§ï‡§æ‡§®",2,"acre"); }
  </script>
</body>
</html>